# Makefile 
#
# This makefile was generated by configure from a Makefile.in definition.

PROGRAM=ptop
SRC=color.c commands.c display.c screen.c sprompt.c pg.c ptop.c username.c \
		utils.c version.c @SRC@
OBJ=color.o commands.o display.o screen.o sprompt.o pg.o ptop.o username.o \
		utils.o version.o @OBJ@
MANPAGE=ptop.1
CLEAN_SRC=sigdesc.h

srcdir=@srcdir@
prefix=@prefix@
exec_prefix=@exec_prefix@
bindir=@bindir@
mandir=@mandir@
VPATH=@srcdir@

PACKAGE_NAME=@PACKAGE_NAME@
SIGNAL=@SIGNAL_H@
AWK=@AWK@
CC=@CC@
CFLAGS=$(DEFS) $(DEFAULT_INCLUDES) @CFLAGS@ @DBCFLAGS@
CFLAGSONLY=@CFLAGS@
DEFS=@DEFS@
LDFLAGS=@DBLDFLAGS@ @LDFLAGS@
LIBS=@LIBS@
INSTALL=@INSTALL@
INSTALL_PROGRAM=@INSTALL_PROGRAM@
INSTALL_DATA=@INSTALL_DATA@
INSTALL_OPTS_PROG=@INSTALL_OPTS_PROG@
INSTALL_OPTS_DATA=

DEFAULT_INCLUDES = -I. -I$(srcdir)

COMPILE = gcc $(CFLAGS)
LINK = $(CC) $(LDFLAGS) -o $@

all: $(PROGRAM)

$(PROGRAM): $(OBJ)
	$(LINK) $(OBJ) $(LIBS)

# explicit dependency for the module appropriate to this machine
m_@MODULE@.o: $(srcdir)/machine/m_@MODULE@.c
	$(COMPILE) -o $@ -c $(srcdir)/machine/m_@MODULE@.c

sigdesc.h: sigconv.awk $(SIGNAL)
	$(AWK) -f $(srcdir)/sigconv.awk $(SIGNAL) >sigdesc.h
 
install: $(PROGRAM) install-man
	mkdir -p $(DESTDIR)$(bindir)
	$(INSTALL_PROGRAM) $(INSTALL_OPTS_PROG) \
		$(PROGRAM) $(DESTDIR)$(bindir)/$(PROGRAM)

install-man: $(MANPAGE)
	mkdir -p $(DESTDIR)$(mandir)/man1
	$(INSTALL_DATA) $(INSTALL_OPTS_DATA) \
		$(MANPAGE) $(DESTDIR)$(mandir)/man1/$(MANPAGE)

clean:
	-rm -f $(PROGRAM) $(OBJ) $(CLEAN_SRC)

distclean: clean
	-rm -f Makefile config.status config.cache config.log config.h

configure: configure.ac
	autoheader
	autoconf

color.o: display.h message.h os.h
commands.o: os.h config.h sigdesc.h ptop.h boolean.h utils.h version.h help.h \
	pg.h
display.o: os.h config.h ptop.h machine.h screen.h layout.h \
    display.h boolean.h utils.h color.h pg.h
screen.o: os.h config.h ptop.h screen.h boolean.h
sprompt.o: c.h pg_trace.h port.h
pg.o: display.h pg.h
ptop.o: os.h config.h ptop.h machine.h commands.h display.h \
    screen.h boolean.h username.h utils.h version.h color.h pg.h
username.o: config.h ptop.h os.h utils.h
utils.o: config.h ptop.h os.h utils.h
version.o: config.h ptop.h
m_@MODULE@.o: config.h ptop.h machine.h loadavg.h pg.h
