# Makefile 
#
# This makefile was generated by configure from a Makefile.in definition.

PROGRAM=top
SRC=color.c commands.c display.c screen.c top.c username.c utils.c version.c @SRC@
OBJ=color.o commands.o display.o screen.o top.o username.o utils.o version.o @OBJ@
MANPAGE=top.1
CLEAN_SRC=sigdesc.h

srcdir=@srcdir@
prefix=@prefix@
exec_prefix=@exec_prefix@
bindir=@bindir@
mandir=@mandir@
VPATH=@srcdir@

PACKAGE_NAME=@PACKAGE_NAME@
SIGNAL=@SIGNAL_H@
AWK=@AWK@
CC=@CC@
CFLAGS=$(DEFS) $(DEFAULT_INCLUDES) @CFLAGS@
CFLAGSONLY=@CFLAGS@
CPPFLAGS=@CPPFLAGS@
DEFS=@DEFS@
LDFLAGS=@LDFLAGS@
LIBS=@LIBS@
INSTALL=@INSTALL@
INSTALL_PROGRAM=@INSTALL_PROGRAM@
INSTALL_DATA=@INSTALL_DATA@
INSTALL_OPTS_PROG=@INSTALL_OPTS_PROG@
INSTALL_OPTS_DATA=

DEFAULT_INCLUDES = -I. -I$(srcdir)

COMPILE =  $(CC) $(CPPFLAGS) $(CFLAGS)
LINK = $(CC) $(CFLAGS) $(LDFLAGS) -o $@


all: $(PROGRAM)

$(PROGRAM): $(OBJ)
	$(LINK) $(OBJ) $(LIBS)

# explicit dependency for the module appropriate to this machine
m_@MODULE@.o: $(srcdir)/machine/m_@MODULE@.c
	$(COMPILE) -o $@ -c $(srcdir)/machine/m_@MODULE@.c

sigdesc.h: sigconv.awk $(SIGNAL)
	$(AWK) -f $(srcdir)/sigconv.awk $(SIGNAL) >sigdesc.h
 
install: $(PROGRAM) install-man
	mkdir -p $(DESTDIR)$(bindir)
	$(INSTALL_PROGRAM) $(INSTALL_OPTS_PROG) \
		$(PROGRAM) $(DESTDIR)$(bindir)/$(PROGRAM)

install-man: $(MANPAGE)
	mkdir -p $(DESTDIR)$(mandir)/man1
	$(INSTALL_DATA) $(INSTALL_OPTS_DATA) \
		$(MANPAGE) $(DESTDIR)$(mandir)/man1/$(MANPAGE)

clean:
	-rm -f $(PROGRAM) $(OBJ) $(CLEAN_SRC)

distclean: clean
	-rm -f Makefile config.status config.cache config.log config.h

configure: configure.ac
	autoheader
	autoconf

commands.o: os.h config.h sigdesc.h top.h boolean.h utils.h version.h help.h
display.o: os.h config.h top.h machine.h screen.h layout.h \
    display.h boolean.h utils.h color.h
screen.o: os.h config.h top.h screen.h boolean.h
top.o: os.h config.h top.h machine.h commands.h display.h \
    screen.h boolean.h username.h utils.h version.h color.h
username.o: top.h utils.h
utils.o: top.h os.h config.h utils.h
version.o: top.h
m_@MODULE@.o: config.h top.h machine.h loadavg.h
